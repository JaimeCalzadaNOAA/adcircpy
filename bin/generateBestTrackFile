#! /usr/bin/env python
import argparse
from datetime import datetime
from AdcircPy.Winds import BestTrack

class generateBestTrackFile(object):
  def __init__(self):
    self.parse_args()
    self.get_fort22()
    self.print_fort22()
    self.save_fort22()

  def parse_args(self):
    self.args = argparse.ArgumentParser(description="Program to generate fort.22 from HURDAT2.")
    self.args.add_argument("storm_id",  help="Storm id from HURDAT2 database.")
    self.args.add_argument("--save-path", help="Output path for fort.22 file.")
    self.args.add_argument("--quiet", "-q", help="Disable verbosity.")
    self.args = self.args.parse_args()

  def get_fort22(self):
    self.fort22 = BestTrack(self.args.storm_id)

  def print_fort22(self):
    if self.args.quiet==False:
      self.fort22.printf()

  def save_fort22(self):
    if self.args.save_path is not None:
      self.fort22.dump(self.args.save_path)
      if self.args.quiet==False:
        print('File written to: {}'.format(self.args.save_path))

if __name__ == "__main__":
  generateBestTrackFile()